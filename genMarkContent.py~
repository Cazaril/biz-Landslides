import re

# Con esta regexp te quitas los titulos
# [\w ]*\n(=+|-+)
# Esta va a ser mejor para el split
# =+|-+

# Y con esta pretendo splitear las slides en las imagenes
# .. \w*:: (\/.*)\n.*

# Las notas de las imagenes van a ser un poco mas putada, voy a probar a poner
# cada nota con su imagen, pero no creo que quede bien
# (\.\. note::\n)(.*)

# with open('./instalacionTemplate.txt', 'r+') as template:
#    temp = template.read()
#    formatedFile = re.sub(r'(=+|-+|\++)\n(.*)\n\1', r'\2\n\1', temp)
#    template.seek(0)
#    template.write(formatedFile)
#    template.truncate()



# for nam in names:
#     with open('./{}.text'.format(nam.get('name')), 'r') as g:
#         fich = g.read()
#         f1Text = re.sub(r'(\.\. \w*:: )(\/.*)\n(.*)\n\n(\.\. note::\n\s*)(.*)',
#                         r'---\n#{}\n![\5](.\2)\n---\n#{}\n'.format(nam.get('name'),
#                                                                    nam.get('name')),
#                         fich)
#         f1Text = re.sub(r'(\.\. \w*:: )(\/.*)\n(.*)\n\n(?!\.\.)',
#                         r'---\n#{}\n![](.\2)\n---\n'.format(nam.get('name')),
#                         f1Text)
#         formatedText = ''
#         while(formatedText != f1Text):
#             formatedText = re.sub(r'(\.\. \w*:: )(\/.*)\n(.*)\n\n(?!\.\.)',
#                                   r'---\n#{}\n![](.\2)\n'.format(nam.get('name')),
#                                   f1Text)
#             aux = formatedText
#             formatedText = f1Text
#             f1Text = aux

#         with open('./{}.md'.format(nam.get('name')), 'w') as md:
#             md.write('# Introduction to WireCloud\n')
#             md.write('.fx: cover\n')
#             md.write('@conwet\n')
#             md.write('---\n')
#             md.write(formatedText)
